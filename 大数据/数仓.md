# 数仓

[TOC]



## 业务流程

1. 前端埋点
2. Nginx
3. 后台应用
4. 日志文件
5. Flume
6. Kafka
7. Flume
8. HDFS
9. Hive
10. MySQL
11. Echarts
12. Atlas
13. Zabbix
14. Griffin

## 业务数据

### 事件日志数据

1. 商品列表
2. 商品点击
3. 商品详情
4. 广告
5. 通知
6. 用户后台活跃
7. 评论
8. 收藏
9. 点赞
10. 错误日志

### 启动日志数据

1. 业务系统
2. Nginx
3. 后台应用（埋点）
4. MySQL
5. Sqoop
6. HDFS
7. Hive
8. MySQL
9. Echarts

## 传输

### Flume

### Kafka

### Sqoop

### Logstash

### DataX

## 存储

### MySQL

### HDFS

### HBase

### Redis

### MongoDB

### Elasticsearch

### PostgreSQL

## 计算

### Hive

### Tez

### Spark

### Flink

### Storm

## 查询

### Presto

### Druid

### Impala

### Kylin

## 可视化

### Echarts

### Superset

### QuickBI

### DataV

## 任务调度

### Azkaban

### Oozie

## 集群监控

### Zabbix

## 元数据管理

### Atlas

## 质量监控

### Griffin

## 数仓分层

### ODS

#### **启动日志表**（ods_start_log）

| 列名 | 类型   | 备注     |
| ---- | ------ | -------- |
| line | string | json串   |
| dt   | string | 分区字段 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_start_log                         |      |

#### 事件日志表（ods_event_log）

| 列名 | 类型   | 备注     |
| ---- | ------ | -------- |
| line | string | json串   |
| dt   | string | 分区字段 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_event_log                         |      |

#### 编码字典表（ods_base_dic）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| dic_code | string | 编号 |
| dic_name | string | 编码名称 |
| parent_code | string | 父编码 |
| create_time | string | 创建日期 |
| operate_time | string | 操作日期 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_base_dic                      |      |

#### 省份表（ods_base_province）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| name | string | 省份名称 |
| region_id | string | 地区ID |
| area_code | string | 地区编码 |
| iso_code | string | iso编码 |


**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_base_province                      |      |

#### 地区表（ods_base_region）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| region_name | string | 地区名称 |


**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_base_region                      |      |

#### 订单表（ods_order_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
|id|string| 订单号 |
|final_total_amount|decimal(10,2)| 订单金额 |
|order_status|string| 订单状态 |
|user_id|string| 用户id |
|out_trade_no|string| 支付流水号 |
|create_time|string| 创建时间 |
|operate_time|string| 操作时间 |
|province_id|string| 省份ID |
|benefit_reduce_amount|decimal(10,2)| 优惠金额 |
|original_total_amount|decimal(10,2)| 原价金额 |
|feight_fee|decimal(10,2)| 运费 |
|dt|string| 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_order_info                        |      |

#### 优惠券领用表（ods_coupon_use）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| coupon_id | string | 优惠券ID |
| user_id | string | skuid |
| order_id | string | spuid |
| coupon_status | string | 优惠券状态 |
| get_time | string | 领取时间 |
| using_time | string | 使用时间(下单) |
| used_time | string | 使用时间(支付) |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_coupon_use                      |      |

#### 活动订单关联表（ods_activity_order）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| activity_id | string | 活动ID |
| order_id | string | 订单ID |
| create_time | string | 创建时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_activity_order                      |      |

#### 订单详情（ods_order_detail）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id |string | ID |
| order_id | string |订单号 |
| user_id |string | 用户id |
| sku_id |string | 商品id |
| sku_name |string | 商品名称 |
| order_price |decimal(10,2) | 商品价格 |
| sku_num |bigint | 商品数量 |
| create_time |string | 创建时间 |
| dt |string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_order_detail                      |      |

#### 订单状态表（ods_order_status_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | bigint | id |
| order_id | string | 订单ID |
| order_status | string | 订单状态 |
| operate_time | string | 修改时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_order_status_log                      |      |

#### 支付流水表（ods_payment_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| out_trade_no | string | 对外业务编号 |
| order_id | string | 订单编号 |
| user_id | string | 用户编号 |
| alipay_trade_no | string | 支付宝交易流水编号 |
| total_amount | decimal(16,2) | 支付金额 |
| subject | string | 交易内容 |
| payment_type | string | 支付类型 |
| payment_time | string | 支付时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_payment_info                      |      |

#### 退单表（ods_order_refund_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| user_id | string | 用户ID |
| order_id | string | 订单ID |
| sku_id | string | 商品ID |
| refund_type | string | 退款类型 |
| refund_num | bigint | 退款件数 |
| refund_amount | decimal(16,2) | 退款金额 |
| refund_reason_type | string | 退款原因类型 |
| create_time | string | 退款时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_order_refund_info                      |      |

#### SKU商品表（ods_sku_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | skuId |
| spu_id | string | spuid |
| price | decimal(10,2) | 价格 |
| sku_name | string | 商品名称 |
| sku_desc | string | 商品描述 |
| weight | string | 重量 |
| tm_id | string | 品牌id |
| category3_id | string | 品类id |
| create_time | string | 创建时间 |
| dt | string | 分区日期 |


**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_sku_info                      |      |

#### SPU商品表（ods_spu_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| spu_name | string | spu名称 |
| category3_id | string | 品类id |
| tm_id | string | 品牌id |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_spu_info                      |      |

#### 品牌表（ods_base_trademark）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| tm_id | bigint | 编号 |
| tm_name | string | 品牌名称 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_base_trademark                      |      |

#### 商品一级分类表（ods_base_category1）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| name | string | 名称 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_base_category1                      |      |

#### 商品二级分类表（ods_base_category2）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| name | string | 名称 |
| category1_id | string | 一级品类id' |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_base_category2                      |      |

#### 商品二级分类表（ods_base_category3）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| name | string | 名称 |
| category2_id | string | 二级品类id' |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_base_category3                      |      |

#### 用户表（ ods_user_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | 用户id |
| name | string | 姓名 |
| birthday | string | 生日 |
| gender | string | 性别 |
| email | string | 邮箱 |
| user_level | string | 用户等级 |
| create_time | string | 创建时间 |
| operate_time | string | 操作时间 |
| dt | string | 分区日期 |


**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_user_info                      |      |

#### 加购表（ods_cart_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| user_id | string | 用户id  |
| sku_id | string | skuid |
| cart_price | string | 放入购物车时价格 |
| sku_num | string | 数量 |
| sku_name | string | sku名称 (冗余) |
| create_time | string | 创建时间 |
| operate_time | string | 修改时间  |
| is_ordered | string | 是否已经下单 |
| order_time | string | 下单时间  |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_cart_info                      |      |

#### 商品收藏表（ods_favor_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| user_id | string | 用户id |
| sku_id | string | skuid |
| spu_id | string | spuid |
| is_cancel | string | 是否取消 |
| create_time | string | 收藏时间 |
| cancel_time | string | 取消时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_favor_info                      |      |

#### 商品评论表（ods_comment_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| user_id | string | 用户ID |
| sku_id | string | 商品sku |
| spu_id | string | 商品spu |
| order_id | string | 订单ID |
| appraise | string | 评价 |
| comment_text | string | 评价内容 |
| create_time | string | 评价时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_comment_info                      |      |

#### 活动表（ods_activity_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| activity_name | string | 活动名称 |
| activity_type | string | 活动类型 |
| start_time | string | 开始时间 |
| end_time | string | 结束时间 |
| create_time | string | 创建时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_activity_info                      |      |

#### 活动规则表（ods_activity_rule）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| activity_id | string | 活动ID |
| condition_amount | string | 满减金额 |
| condition_num | string | 满减件数 |
| benefit_amount | string | 优惠金额 |
| benefit_discount | string | 优惠折扣 |
| benefit_level | string | 优惠级别 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_activity_rule                      |      |

#### 优惠券表（ods_coupon_info）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| coupon_name | string | 购物券名称 |
| coupon_type | string | 购物券类型 1 现金券 2 折扣券 3 满减券 4 满件打折券 |
| condition_amount | string | 满额数 |
| condition_num | string | 满件数 |
| activity_id | string | 活动编号 |
| benefit_amount | string | 减金额 |
| benefit_discount | string | 折扣 |
| create_time | string | 创建时间 |
| range_type | string | 范围类型 1、商品 2、品类 3、品牌 |
| spu_id | string | 商品id |
| tm_id | string | 品牌id |
| category3_id | string | 品类id |
| limit_num | string | 最多领用次数 |
| operate_time | string | 修改时间 |
| expire_time | string | 过期时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| INPUTFORMAT    | com.hadoop.mapred.DeprecatedLzoTextInputFormat             |      |
| OUTPUTFORMAT   | org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat |      |
| STORED AS      |                                                            |      |
| LOCATION       | /warehouse/gmall/ods/ods_coupon_info                      |      |

### DWD

DWD层数据，采用parquet列存储，lzo压缩，因为数据要用于查询，且是基础数据

#### 启动日志表（dwd_start_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| entry | string | 入口： push=1，widget=2，icon=3，notification=4, lockscreen_widget =5 |
| open_ad_type | string | 广告打开方式 |
| action | string | 状态：成功=1  失败=2 |
| loading_time | string | 加载时长 |
| detail | string | 失败码（ |
| extend1 | string | 失败的message |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_start_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 日志基础明细表（dwd_base_event_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| event_name | string | 事件名称 |
| event_json | string | 事件json |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_base_event_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 商品点击表（dwd_display_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| action | string | 动作：曝光商品=1，点击商品=2， |
| goodsid | string | 商品ID（服务端下发的ID） |
| place | string | 顺序（第几条商品，第一条为0，第二条为1，如此类推） |
| extend1 | string | 曝光类型：1 - 首次曝光 2-重复曝光（没有使用） |
| category | string | 分类ID（服务端定义的分类ID） |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_display_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 商品详情页表（dwd_newsdetail_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| entry | string | 页面入口来源：应用首页=1、push=2、详情页相关推荐=3 |
| action | string | 动作：开始加载=1，加载成功=2（pv），加载失败=3, 退出页面=4 |
| goodsid | string | 商品ID（服务端下发的ID） |
| showtype | string | 商品样式：0、无图1、一张大图2、两张图3、三张小图4、一张小图5、一张大图两张小图    来源于详情页相关推荐的商品，上报样式都为0（因为都是左文右图） |
| news_staytime | string | 面停留时长：从商品开始加载时开始计算，到用户关闭页面所用的时间。<br>若中途用跳转到其它页面了，则暂停计时，待回到详情页时恢复计时。<br />或中途划出的时间超过10分钟，则本次计时作废，不上报本次数据。如未加载成功退出，则报空。 |
| loading_time | string | 加载时长：计算页面开始加载到接口返回数据的时间 （开始加载报0，加载成功或加载失败才上报时间） |
| type1 | string | 加载失败码：把加载失败状态码报回来（报空为加载成功，没有失败） |
| category | string | 分类ID（服务端定义的分类ID） |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_newsdetail_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 商品列表页表（dwd_loading_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| action | string | 动作：开始加载=1，加载成功=2，加载失败=3 |
| loading_time | string | 加载时长：计算下拉开始到接口返回数据的时间，（开始加载报0，加载成功或加载失败才上报时间） |
| loading_way | string | 加载类型：1-读取缓存，2-从接口拉新数据   （加载成功才上报加载类型） |
| extend1 | string | 扩展字段 Extend1 |
| extend2 | string | 扩展字段 Extend2 |
| type | string | 加载类型：自动加载=1，用户下拽加载=2，底部加载=3（底部条触发点击底部提示条/点击返回顶部加载） |
| type1 | string |  加载失败码：把加载失败状态码报回来（报空为加载成功，没有失败） |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_loading_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 广告表（dwd_ad_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| entry | string | 入口：商品列表页=1  应用首页=2 商品详情页=3 |
| action | string | 动作： 广告展示=1 广告点击=2 |
| contenttype | string | Type: 1 商品 2 营销活动 |
| displaymills | string | 展示时长 毫秒数 |
| itemid | string | 商品id |
| activityid | string | 营销活动id |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_ad_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 消息通知表（dwd_notification_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| action | string | 动作：通知产生=1，通知弹出=2，通知点击=3，常驻通知展示（不重复上报，一天之内只报一次）=4 |
| noti_type | string | 通知id：预警通知=1，天气预报（早=2，晚=3），常驻=4 |
| ap_time | string | 客户端弹出时间 |
| content | string | 备用字段 |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_notification_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 用户后台活跃表（dwd_active_background_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| active_source | string | 1=upgrade,2=download(下载),3=plugin_upgrade |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_active_background_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 评论表（dwd_comment_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| comment_id | int | 评论ID |
| userid | int | 用户id |
| p_comment_id | int | 父级评论id(为0则是一级评论,不为0则是回复) |
| content | string | 评论内容 |
| addtime | string | 创建时间 |
| other_id | int | 评论的相关id |
| praise_count | int | 点赞数量 |
| reply_count | int | 回复数量 |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_comment_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 收藏表（dwd_favorites_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| id | int | 主键 |
| course_id | int | 商品id |
| userid | int | 用户ID |
| add_time | string | 创建时间 |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_favorites_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 点赞表（dwd_praise_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| id | string | 主键id |
| userid | string | 用户id |
| target_id | string | 点赞的对象id |
| type | string | 点赞类型 1问答点赞 2问答评论点赞 3 文章点赞数4 评论点赞 |
| add_time | string | 添加时间 |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_praise_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 错误日志表（dwd_error_log）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备ID |
| user_id | string | 用户ID |
| version_code | string | 版本号 |
| version_name | string | 版本名称 |
| lang | string | 语言 |
| source | string | 渠道来源 |
| os | string | 操作系统 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | SDK版本 |
| gmail | string | 谷歌邮箱 |
| height_width | string | 宽高 |
| app_time | string | 客户端时间 |
| network | string | 网络模型 |
| lng | string | 经度 |
| lat | string | 维度 |
| errorbrief | string | 错误摘要 |
| errordetail | string | 错误详情 |
| server_time | string | 服务端时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_error_log                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 商品维度表（全量）（dwd_dim_sku_info）
降维，六表合一，sku，spu，trademark，category3，category2，category1

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| spu_id | string | spuid |
| price | double | 商品价格 |
| sku_name | string | 商品名称 |
| sku_desc | string | 商品描述 |
| weight | double | 重量 |
| tm_id | string | 品牌id |
| tm_name | string | 品牌名称 |
| category3_id | string | 三级分类id |
| category2_id | string | 二级分类id |
| category1_id | string | 一级分类id |
| category3_name | string | 三级分类名称 |
| category2_name | string | 二级分类名称 |
| category1_name | string | 一级分类名称 |
| spu_name | string | spu名称 |
| create_time | string | 创建时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_dim_sku_info                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 优惠券信息表（全量）（dwd_dim_coupon_info）

每日全量导入，从ods_coupon_info

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| coupon_name | string | 购物券名称 |
| coupon_type | string | 购物券类型 1 现金券 2 折扣券 3 满减券 4 满件打折券 |
| condition_amount | string | 满额数 |
| condition_num | string | 满件数 |
| activity_id | string | 活动编号 |
| benefit_amount | string | 减金额 |
| benefit_discount | string | 折扣 |
| create_time | string |创建时间|
| rang_type | string |  范围类型 1、商品 2、品类 3、品牌  |
| spu_id | string |商品id|
| tm_id | string | 品牌id |
| category3_id | string | 品类id |
| limit_num | string | 最多领用次数 |
| operate_time | string | 修改时间 |
| expire_time | string | 过期时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_dim_coupon_info                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 活动维度表（全量）（dwd_dim_activity_info）

每日全量导入，合并活动表，活动规则表，从ods_activity_info，ods_activity_rule

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| activity_name | string | 活动名称 |
| activity_type | string | 活动类型 |
| condition_amount | string | 满减金额 |
| condition_num | string | 满减件数 |
| benefit_amount | string | 优惠金额 |
| benefit_discount | string | 优惠折扣 |
| benefit_level | string | 优惠级别 |
| start_time | string | 开始时间 |
| end_time | string | 结束时间 |
| create_time | string | 创建时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_dim_activity_info                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 地区维度表（特殊）（dwd_dim_base_province）

只导入一次，合并ods_base_province以及ods_base_region表

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | id |
| province_name | 省市名称 |
| area_code | 地区编码 |
| iso_code | ISO编码 |
| region_id | 地区id |
| region_name | 地区名称 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_dim_base_province                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 时间维度表（特殊）（dwd_dim_date_info）

只导入一次，记录日期，节假日

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| date_id | string | 日 |
| week_id | int | 周 |
| week_day | int | 周的第几天 |
| day | int | 每月的第几天 |
| month | int | 第几月 |
| quarter | int | 第几季度 |
| year | int | 年 |
| is_workday | int | 是否是周末 |
| holiday_id | int | 是否是节假日 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_dim_date_info                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 订单明细事实表（增量）（dwd_fact_order_detail）

维度：时间，用户，地区，商品，件数，金额<br/>
每日增量导入，对应与ods_order_detail，需join ods_order_info获取province_id

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| order_id | string | 订单号 |
| user_id | string | 用户id |
| sku_id | string | sku商品id |
| sku_name | string | 商品名称 |
| order_price | decimal(10,2) | 商品价格 |
| sku_num | bigint | 商品数量 |
| create_time | string | 创建时间 |
| province_id | string | 省份ID |
| total_amount | decimal(20,2) | 订单总金额 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_fact_order_detail                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 支付事实表（增量）（dwd_fact_payment_info）

维度：时间，用户，地区，金额<br/>
每日增量导入，对应ods_payment_info，需join ods_order_info获取province_id

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| out_trade_no | string | 对外业务编号 |
| order_id | string | 订单编号 |
| user_id | string | 用户编号 |
| alipay_trade_no | string | 支付宝交易流水编号 |
| payment_amount | decimal(16,2) | 支付金额 |
| subject | string | 交易内容 |
| payment_type | string | 支付类型 |
| payment_time | string | 支付时间 |
| province_id | string | 省份ID |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_fact_payment_info                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 退款事实表（增量）（dwd_fact_order_refund_info）

维度：时间，用户，商品，件数/金额<br/>
每日增量导入，对应ods_order_refund_info

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| user_id | string | 用户ID |
| order_id | string | 订单ID |
| sku_id | string | 商品ID |
| refund_type | string | 退款类型 |
| refund_num | bigint | 退款件数 |
| refund_amount | decimal(16,2) | 退款金额 |
| refund_reason_type | string | 退款原因类型 |
| create_time | string | 退款时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_fact_order_refund_info                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 评价事实表（增量）（dwd_fact_comment_info）

维度：时间，用户，商品，个数<br/>
每日增量导入，对应ods_comment_info

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| user_id | string | 用户ID |
| sku_id | string | 商品sku |
| spu_id | string | 商品spu |
| order_id | string | 订单ID |
| appraise | string | 评价 |
| create_time | string | 评价时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_fact_comment_info                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 加购事实表（每日全量）（dwd_fact_cart_info）

维度：时间，用户，商品，件数/金额<br/>
每日增量导入，对应ods_cart_info，周期性删除历史数据

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| user_id | string | 用户id |
| sku_id | string | skuid |
| cart_price | string | 放入购物车时价格 |
| sku_num | string | 数量  |
| sku_name | string | sku名称 (冗余) |
| create_time | string | 创建时间 |
| operate_time | string | 修改时间 |
| is_ordered | string | 是否已经下单。1为已下单;0为未下单 |
| order_time | string | 下单时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_fact_cart_info                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 收藏事实表（每日全量）（dwd_fact_favor_info）

维度：时间，用户，商品，个数<br/>
每日增量导入，对应ods_favor_info，周期性删除历史数据

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| user_id | string | 用户id |
| sku_id | string | skuid |
| spu_id | string | spuid |
| is_cancel | string | 是否取消 |
| create_time | string | 收藏时间 |
| cancel_time | string | 取消时间 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_fact_favor_info                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 优惠券领用事实表（新增，更新）（dwd_fact_coupon_use）

维度：时间，用户，优惠券，个数<br/>
每日导入新增以及更新的数据，并合并历史数据，覆写原有分区 ，Note：使用if函数合并新旧字段<br/>
历史数据：dwd_fact_coupon_use <br/>
新数据：ods_coupon_use <br/>

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| coupon_id | string | 优惠券ID |
| user_id | string | userid |
| order_id | string |订单id  |
| coupon_status | string |优惠券状态  |
| get_time | string | 领取时间 |
| using_time | string | 使用时间(下单) |
| used_time | string | 使用时间(支付) |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_fact_coupon_use                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 订单事实表（新增，更新）（dwd_fact_order_info）

维度：时间，用户，地区，活动，个数/金额 <br/>
每日导入新增以及更新的数据，并合并历史数据，覆写原有分区 ，Note：使用if函数合并新旧字段<br/>
Note：使用collect_set函数行转列，使用concat_ws函数进行拼接，使用str_to_map函数进行映射 <br/>
历史数据：dwd_fact_order_info <br/>
新数据：ods_order_info，ods_activity_order，ods_order_status_log <br/>

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| order_status | string | 订单状态 |
| user_id | string | 用户id |
| out_trade_no | string | 支付流水号 |
| create_time | string | 创建时间(未支付状态) |
| payment_time | string | 支付时间(已支付状态) |
| cancel_time | string | 取消时间(已取消状态) |
| finish_time | string | 完成时间(已完成状态) |
| refund_time | string | 退款时间(退款中状态) |
| refund_finish_time | string | 退款完成时间(退款完成状态) |
| province_id | string | 省份ID |
| activity_id | string | 活动ID |
| original_total_amount | string | 原价金额 |
| benefit_reduce_amount | string | 优惠金额 |
| feight_fee | string | 运费 |
| final_total_amount | decimal(10,2) | 订单金额 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_fact_order_info                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 用户维度表（每日全量，保留历史）（dwd_dim_user_info_his）

拉链表，记录数据的升命周期，保留新旧数据。<br/>
将每日数据导入临时表，再从临时表导入历史表。每日导入更新旧数据的end_date，以及新数据的end_date。
历史数据：dwd_dim_user_info_his <br/>
新数据：ods_user_info，dwd_dim_user_info_his_tmp <br/>

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| name | string | 姓名 |
| birthday | string | 生日 |
| gender | string | 性别 |
| email | string | 邮箱 |
| user_level | string | 用户等级 |
| create_time | string | 创建时间 |
| operate_time | string | 操作时间 |
| start_date | string | 有效开始日期 |
| end_date | string | 有效结束日期 |


**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_dim_user_info_his                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

#### 用户维度临时表（dwd_dim_user_info_his_tmp）

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| id | string | id |
| name | string | 姓名 |
| birthday | string | 生日 |
| gender | string | 性别 |
| email | string | 邮箱 |
| user_level | string | 用户等级 |
| create_time | string | 创建时间 |
| operate_time | string | 操作时间 |
| start_date | string | 有效开始日期 |
| end_date | string | 有效结束日期 |


**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dwd/dwd_dim_user_info_his_tmp                      |      |
| TBLPROPERTIES  | 'parquet.compression'='lzo'                              |      |

### DWS

每日聚合，从不同的角度聚合不同的事实表。

#### 每日设备行为（dws_uv_detail_daycount）

数据统计来源：dwd_start_log <br/>
Note：concat_ws函数

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备唯一标识 |
| user_id | string | 用户标识 |
| version_code | string | 程序版本号 |
| version_name | string | 程序版本名 |
| lang | string | 系统语言 |
| source | string | 渠道号 |
| os | string | 安卓系统版本 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | sdkVersion |
| gmail | string | gmail |
| height_width | string | 屏幕宽高 |
| app_time | string | 客户端日志产生时的时间 |
| network | string | 网络模式 |
| lng | string | 经度 |
| lat | string | 纬度 |
| login_count | bigint | 活跃次数 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                     |      |
| LOCATION       | /warehouse/gmall/dws/dws_uv_detail_daycount                      |      |

#### 每日会员行为（dws_user_action_daycount）

数据统计来源：
* dwd_start_log
* dwd_fact_cart_info
* dwd_fact_order_info
* dwd_fact_payment_info

Note：分别从每个事实表统计数据，然后补齐空列，用0替换，union all合并数据，最后外层sum

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| user_id | string | 用户 id |
| login_count | bigint | 登录次数 |
| cart_count | bigint | 加入购物车次数 |
| cart_amount | double | 加入购物车金额 |
| order_count | bigint | 下单次数 |
| order_amount | double | 下单金额 |
| payment_count | bigint | 支付次数 |
| payment_amount | double | 支付金额 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/dws/dws_user_action_daycount              |      |

#### 每日商品行为（dws_sku_action_daycount）

数据统计来源：
* dwd_start_log
* dwd_fact_order_detail 统计件数
* dwd_fact_order_info 统计支付
* dwd_fact_refund_info 统计支付
* dwd_fact_cart_info 
* dwd_fact_favor_info 
* dwd_fact_comment_info 

Note：分别从每个事实表统计数据，然后补齐空列，用0替换，union all合并数据，最后外层sum <br/>
Note：sum if的组合使用可用于转换天数为次数<br/>

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| sku_id | string | sku_id |
| order_count | string | 被下单次数 |
| order_num | string | 被下单件数 |
| order_amount | string | 被下单金额 |
| payment_count | string | 被支付次数 |
| payment_num | string | 被支付件数 |
| payment_amount | string | 被支付金额 |
| refund_count | string | 被退款次数 |
| refund_num | string | 被退款件数 |
| refund_amount | string | 被退款金额 |
| cart_count | string | 被加入购物车次数 |
| cart_num | string | 被加入购物车件数 |
| favor_count | string | 被收藏次数 |
| appraise_good_count | string | 好评数 |
| appraise_mid_count | string | 中评数 |
| appraise_bad_count | string | 差评数 |
| appraise_default_count | string | 默认评价数 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/dws/dws_sku_action_daycount              |      |

#### 每日购买行为（dws_sale_detail_daycount）

数据统计来源：
* dwd_dim_user_info_his 
* dwd_dim_sku_info
* dwd_fact_order_detail

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| user_id | 用户 id |
| sku_id | 商品 id |
| user_gender | 用户性别 |
| user_age |  用户年龄 |
| user_level | 用户等级 |
| order_price | 商品价格 |
| sku_name | 商品名称 |
| sku_tm_id | 品牌id |
| sku_category3_id | 商品三级品类id |
| sku_category2_id | 商品二级品类id |
| sku_category1_id | 商品一级品类id |
| sku_category3_name | 商品三级品类名称 |
| sku_category2_name | 商品二级品类名称 |
| sku_category1_name | 商品一级品类名称 |
| spu_id | 商品 spu |
| sku_num | 购买个数 |
| order_count | 当日下单单数 |
| order_amount | 当日下单金额 |
| dt | string | 分区日期 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/dws/dws_sale_detail_daycount              |      |

### DWT

以分析的主题对象为建模驱动，基于上层的应用和产品的指标需求，构建主题对象的全量宽表。<br/>
累计dws层的数据，新旧数据合并

#### 设备主题宽表（dwt_uv_topic）

数据统计来源：
* dwt_uv_topic 历史数据
* dws_uv_detail_daycount 当日数据 

Note：nvl函数，if函数 sum if组合

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| mid_id | string | 设备唯一标识 |
| user_id | string | 用户标识 |
| version_code | string | 程序版本号 |
| version_name | string | 程序版本名 |
| lang | string | 系统语言 |
| source | string | 渠道号 |
| os | string | 安卓系统版本 |
| area | string | 区域 |
| model | string | 手机型号 |
| brand | string | 手机品牌 |
| sdk_version | string | sdkVersion |
| gmail | string | gmail |
| height_width | string | 屏幕宽高 |
| app_time | string | 客户端日志产生时的时间 |
| network | string | 网络模式 |
| lng | string | 经度 |
| lat | string | 纬度 |
| login_date_first | string | 首次活跃时间 |
| login_date_last | string | 末次活跃时间 |
| login_day_count | bigint |  当日活跃次数|
| login_count | bigint | 累积活跃天数 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/dwt/dwt_uv_topic                          |      |

#### 会员主题宽表（dwt_user_topic）

数据统计来源：
* dwt_user_topic 历史数据
* dws_user_action_daycount 当日数据 

Note：nvl函数，if函数 sum if组合

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| user_id | string | 用户id |
| login_date_first | string | 首次登录时间 |
| login_date_last | string | 末次登录时间 |
| login_count | bigint | 累积登录天数 |
| login_last_30d_count | bigint | 最近30日登录天数 |
| order_date_first | string | 首次下单时间 |
| order_date_last | string | 末次下单时间 |
| order_count | bigint | 累积下单次数 |
| order_amount | decimal(16,2) | 累积下单金额 |
| order_last_30d_count | bigint | 最近30日下单次数 |
| order_last_30d_amount | bigint | 最近30日下单金额 |
| payment_date_first | string | 首次支付时间 |
| payment_date_last | string | 末次支付时间 |
| payment_count | decimal(16,2) | 累积支付次数 |
| payment_amount | decimal(16,2) | 累积支付金额 |
| payment_last_30d_count | decimal(16,2) | 最近30日支付次数 |
| payment_last_30d_amount | decimal(16,2) | 最近30日支付金额 |


**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/dwt/dwt_user_topic              |      |

#### 商品主题宽表（dwt_sku_topic）

数据统计来源：
* dwt_sku_topic 历史数据
* dws_sku_action_daycount 当日数据 

Note：nvl函数，if函数 sum if组合

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| sku_id | string | sku_id |
| spu_id | string | spu_id |
| order_last_30d_count | bigint | 最近30日被下单次数 |
| order_last_30d_num | bigint | 最近30日被下单件数 |
| order_last_30d_amount | decimal(16,2) | 最近30日被下单金额 |
| order_count | bigint | 累积被下单次数 |
| order_num | bigint | 累积被下单件数 |
| order_amount | decimal(16,2) | 累积被下单金额 |
| payment_last_30d_count | bigint | 最近30日被支付次数 |
| payment_last_30d_num | bigint | 最近30日被支付件数 |
| payment_last_30d_amount | decimal(16,2) | 最近30日被支付金额 |
| payment_count | bigint | 累积被支付次数 |
| payment_num | bigint | 累积被支付件数 |
| payment_amount | decimal(16,2) | 累积被支付金额 |
| refund_last_30d_count | bigint | 最近三十日退款次数 |
| refund_last_30d_num | bigint | 最近三十日退款件数 |
| refund_last_30d_amount | decimal(10,2) | 最近三十日退款金额 |
| refund_count | bigint | 累积退款次数 |
| refund_num | bigint | 累积退款件数 |
| refund_amount | decimal(10,2) | 累积退款金额 |
| cart_last_30d_count | bigint | 最近30日被加入购物车次数 |
| cart_last_30d_num | bigint | 最近30日被加入购物车件数 |
| cart_count | bigint | 累积被加入购物车次数 |
| cart_num | bigint | 累积被加入购物车件数 |
| favor_last_30d_count | bigint |最近30日被收藏次数  |
| favor_count | bigint | 累积被收藏次数 |
| appraise_last_30d_good_count | bigint | 最近30日好评数 |
| appraise_last_30d_mid_count | bigint | 最近30日中评数 |
| appraise_last_30d_bad_count | bigint | 最近30日差评数 |
| appraise_last_30d_default_count | bigint | 最近30日默认评价数 |
| appraise_good_count | bigint | 累积好评数 |
| appraise_mid_count | bigint | 累积中评数 |
| appraise_bad_count | bigint | 累积差评数 |
| appraise_default_count | bigint | 累积默认评价数 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/dwt/dwt_sku_topic                         |      |


### ADS

#### 设备主题

##### 活跃设备数（ads_uv_count）

数据统计来源：
* dwt_uv_topic 

Note：灵活使用sum if组合累计

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| dt | string | 统计日期 |
| day_count | bigint |当日用户数量  |
| wk_count | bigint | 当周用户数量 |
| mn_count | bigint | 当月用户数量 |
| is_weekend | string | Y,N是否是周末,用于得到本周最终结果 |
| is_monthend | string | Y,N是否是月末,用于得到本月最终结果 |
**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/ads/ads_uv_count                         |      |

##### 每日新增设备（ads_new_mid_count）

数据统计来源：
* dwt_uv_topic 

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| create_date | string | 创建时间 |
| new_mid_count | bigint | 新增设备数量 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/ads/ads_new_mid_count                    |      |

##### 沉默用户数（ads_silent_count）

数据统计来源：
* dwt_uv_topic 

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| dt | string | 创建时间 |
| silent_count | bigint | 沉默设备数 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/ads/ads_silent_count                    |      |

##### 本周回流用户数（ads_back_count）

数据统计来源：
* dwt_uv_topic 
* dws_uv_detail_daycount 

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| dt | string | 创建时间 |
| wk_dt | string | 统计日期所在周 |
| silent_count | bigint | 回流设备数 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/ads/ads_back_count                    |      |

#####  流失用户数（ads_wastage_count）

数据统计来源：
* dwt_uv_topic 

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| dt | string | 创建时间 |
| wastage_count | bigint | 流失设备数 |

**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/ads/ads_wastage_count                    |      |

#####  留存率（ads_user_retention_day_rate）

数据统计来源：
* dwt_uv_topic 

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| stat_date | string | 统计日期 |
| create_date | string | 设备新增日期 |
| retention_day | int | 截止当前日期留存天数 |
| retention_count | bigint | 留存数量 |
| new_mid_count | bigint | 设备新增数量 |
| retention_ratio | decimal(10,2) | 留存率 |


**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/ads/ads_user_retention_day_rate                    |      |

#####  最近连续三周活跃用户数（ads_continuity_wk_count）

数据统计来源：
* dwt_uv_topic 

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| dt | string | 统计日期,一般用结束周周日日期,如果每天计算一次,可用当天日期 |
| wk_dt | string | 持续时间 |
| continuity_count | bigint | 活跃次数 |


**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/ads/ads_continuity_wk_count                    |      |

#####  最近七天内连续三天活跃用户数（ads_continuity_uv_count）

数据统计来源：
* dws_uv_detail_daycount 

| 列名 | 类型   | 备注     |
| ---- | ---- | ---- |
| dt | string | 统计日期|
| wk_dt | string | 持续时间 |
| continuity_count | bigint | 活跃次数 |


**附加属性**

| 属性名         | 属性值                                                     | 备注 |
| -------------- | ---------------------------------------------------------- | ---- |
| PARTITIONED BY | dt                                                         |      |
| STORED AS      | parquet                                                    |      |
| LOCATION       | /warehouse/gmall/ads/ads_continuity_uv_count                    |      |

